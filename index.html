<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.6, maximum-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Lucal</title>
    <style>
        .calculation-line {
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-lg p-4 sm:p-8 space-y-6 flex flex-col justify-between min-h-[80vh] border border-[#228B22]">
        <div>
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-[#228B22] mb-4 tracking-wide" style="font-family:serif;">Lucal Calculator</h1>
            <div class="mb-4">
                <label for="input" class="block text-base sm:text-lg font-medium text-[#3B2F2F] mb-2">Amount :</label>
                <input type="number" id="input" oninput="calculate()" onfocus="scrollLeft()" max="10000" class="w-full px-3 py-2 sm:px-4 sm:py-2 border border-[#228B22] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#228B22] text-base sm:text-lg placeholder:text-[#3B2F2F]" placeholder="Enter amount">
            </div>
            <div class="mb-4">
                <label for="tax" class="block text-base sm:text-lg font-medium text-[#3B2F2F] mb-2">Tax (%) :</label>
                <input type="number" id="tax" value="36" min="0" max="100" oninput="calculate()" class="w-full px-3 py-2 sm:px-4 sm:py-2 border border-[#B7410E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B7410E] text-base sm:text-lg placeholder:text-[#3B2F2F]">
            </div>
            <div class="flex flex-row items-stretch justify-between mb-4 gap-4">
                <div class="flex-1 bg-white rounded-xl shadow-lg border border-[#228B22] px-4 py-3 flex flex-col items-center">
                    <span class="text-xs sm:text-sm text-[#3B2F2F] mb-1 text-center">Amount payable</span>
                    <span id="output" class="text-3xl sm:text-4xl font-extrabold text-[#228B22] text-center"> </span>
                </div>
                <div class="flex-1 bg-white rounded-xl shadow-lg border border-[#B7410E] px-4 py-3 flex flex-col items-center">
                    <span class="text-xs sm:text-sm text-[#3B2F2F] mb-1 text-center">Saved amount</span>
                    <span id="saved-amount" class="text-3xl sm:text-4xl font-extrabold text-[#B7410E] text-center"> </span>
                </div>
            </div>
            <div id="calculation1" class="calculation-line text-xs sm:text-sm text-[#3B2F2F]"></div>
            <div id="calculation" class="calculation-line text-xs sm:text-sm text-[#3B2F2F]"></div>
            <div id="error-message" class="text-sm text-[#B7410E] font-semibold mt-2"></div>
        </div>
        <div class="grid grid-cols-3 gap-2 sm:gap-3 mb-2 sm:mb-4 mt-auto">
            <button onclick="addValue(1)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">1</button>
            <button onclick="addValue(2)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">2</button>
            <button onclick="addValue(3)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">3</button>
            <button onclick="addValue(4)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">4</button>
            <button onclick="addValue(5)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">5</button>
            <button onclick="addValue(6)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">6</button>
            <button onclick="addValue(7)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">7</button>
            <button onclick="addValue(8)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">8</button>
            <button onclick="addValue(9)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">9</button>
            <button onclick="addDecimal()" class="bg-[#3B2F2F] hover:bg-[#B7410E] text-white font-bold py-2 rounded-lg shadow">.</button>
            <button onclick="addValue(0)" class="bg-[#228B22] hover:bg-[#3B2F2F] text-white font-bold py-2 rounded-lg shadow">0</button>
            <button onclick="clearValue()" class="bg-[#3B2F2F] hover:bg-[#B7410E] text-white font-bold py-2 rounded-lg shadow">Clear</button>
        </div>
    </div>
    <script>
        window.onload = function() {
            document.getElementById("input").focus();
            document.getElementById("input").click();
        };
        function scrollLeft() {
            window.scrollTo({ left: 0, behavior: 'smooth' });
        }
        let currentValue = '';

        function addValue(num) {
            currentValue += num;
            updateInputField();
        }

        function addDecimal() {
            if (!currentValue.includes('.')) {
                currentValue += '.';
                updateInputField();
            }
        }

        function clearValue() {
            currentValue = '';
            updateInputField();
        }

        function updateInputField() {
            document.getElementById('input').value = currentValue;
            if (currentValue.charAt(currentValue.length - 1) !== '.') {
                calculate();
            }
        }

        function calculate() {
            const input = document.getElementById('input').value.trim();
            const tax = parseFloat(document.getElementById('tax').value) / 100;
            let y = 0;
            let out = 0;
            let resultMessage = "";
            let calculationMessage = "";
            let errorMessage = "";
            if (input === '' || input === '.') {
                document.getElementById('output').innerText = "";
                document.getElementById('saved-amount').innerText = "";
                document.getElementById('calculation1').innerText = "";
                document.getElementById('calculation').innerText = "";
                document.getElementById('error-message').innerText = "";
                return;
            }
            const inputValue = parseFloat(input);
            if (isNaN(inputValue)) {
                errorMessage = "Please enter a valid number.";
            } else if (inputValue > 10000) {
                errorMessage = "Maximum allowed value is 10,000.";
            }
            if (errorMessage) {
                document.getElementById('output').innerText = "";
                document.getElementById('saved-amount').innerText = "";
                document.getElementById('calculation1').innerText = "";
                document.getElementById('calculation').innerText = "";
                document.getElementById('error-message').innerText = errorMessage;
                return;
            } else {
                document.getElementById('error-message').innerText = "";
            }
            if (inputValue <= 700) {
                out = inputValue * 0.15 + inputValue * 0.85 * tax;
                out = out.toFixed(2);
                resultMessage =  out;
                calculationMessage = "(input*.15)+(input*.85*tax)";
            } else {
                y = inputValue - 700;
                out = 700 * 0.15 + 700 * 0.85 * tax + y;
                out = out.toFixed(2);
                resultMessage =  out;
                calculationMessage = "(700*.15)+(700*.85*tax)+(input-700)";
            }
            document.getElementById('output').innerText = resultMessage;
            const savedAmount = (inputValue - parseFloat(out)).toFixed(2);
            document.getElementById('saved-amount').innerText = savedAmount;
            document.getElementById('calculation1').innerText = "Calculation Performed:";
            document.getElementById('calculation').innerText = calculationMessage;
        }

    </script>
</body>
</html>
