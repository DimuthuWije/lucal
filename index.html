<div id="output-container">
    <span id="output"></span>
    <button id="copyBtn" onclick="copyToClipboard()" style="display: none;">Copy</button>
</div>

<script>
function calculate() {
    const input = document.getElementById('input').value.trim();
    const tax = parseFloat(document.getElementById('tax').value) / 100;
    let y = 0;
    let out = 0;
    let resultMessage = "";
    let calculationMessage = "";
    
    if (input === '' || input === '.') {
        document.getElementById('output').innerText = "";
        document.getElementById('calculation1').innerText = "";
        document.getElementById('calculation').innerText = "";
        document.getElementById('copyBtn').style.display = "none"; 
        return;
    }
    
    const inputValue = parseFloat(input);
    if (isNaN(inputValue)) {
        document.getElementById('output').innerText = "";
        document.getElementById('calculation1').innerText = "";
        document.getElementById('calculation').innerText = "";
        document.getElementById('copyBtn').style.display = "none";
        return;
    }
    
    if (inputValue <= 700) {
        out = inputValue * 0.15 + inputValue * 0.85 * tax;
        calculationMessage = "(input*.15)+(input*.85*tax)";
    } else {
        y = inputValue - 700;
        out = 700 * 0.15 + 700 * 0.85 * tax + y;
        calculationMessage = "(700*.15)+(700*.85*tax)+(input-700)";
    }

    out = out.toFixed(2);  
    resultMessage = "Amount payable: " + out;

    document.getElementById('output').innerText = resultMessage;
    document.getElementById('calculation1').innerText = "Calculation Performed:";
    document.getElementById('calculation').innerText = calculationMessage;
    
    document.getElementById('copyBtn').style.display = "inline-block";

    document.getElementById('copyBtn').setAttribute('data-value', out);
}

function copyToClipboard() {
    const outValue = document.getElementById('copyBtn').getAttribute('data-value');
    if (outValue) {
        navigator.clipboard.writeText(outValue)
            .then(() => alert("Copied to clipboard: " + outValue))
            .catch(err => console.error("Failed to copy: ", err));
    }
}
</script>
